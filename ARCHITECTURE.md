# Web Monitoring Architecture
-   [Definition of Terms](#0)
-   [System Architecture](#1)
-   [Deployment Plan](#2)

<a id="0"></a>
## Definition of Terms

* **Page**: a web page crawled over time by one or more services like the Internet
  Archive or Versionista.
* **Version**: a snapshot of a Page at a specific time (saved as HTML, for now).
* **Change**: two different Versions of the same Page.
* **Diff**: a representation of a Change: this could be a plain text `diff` (as in
  the UNIX command line utility) or a richer representation such as differences in the rendered HTML.
* **Annotation**: a set of key-value pairs characterizing a given Change, submitted
  by a human analyst or generated by an automated process. A given Change might
  be annotated by multiple analysts, thus creating multiple Annotations per
  Change.

For more detail, see the Schema section below.

<a id="1"></a>

## System Architecture

The project is currently divided into several repositories handling complementary aspects of web monitoring. They can be developed and upgraded semi-independently, communicating via agreed-upon interfaces. For additional information, you can contact the active maintainers listed alongside each repo or our Development Project Manager, [@jsnshrmn](https://github.com/jsnshrmn):
* [**web-monitoring-db**](https://github.com/edgi-govdata-archiving/web-monitoring-db) ([@Mr0grog](https://github.com/Mr0grog))
  A Ruby on Rails app that serves database data via a REST API, serves diffs, and collects human-entered annotations.
* [**web-monitoring-ui**](https://github.com/edgi-govdata-archiving/web-monitoring-ui) ([@lightandluck](https://github.com/lightandluck))
  A React front-end that provides useful views of the diffs. It
  communicates with the Rails app via JSON.
* [**web-monitoring-processing**](https://github.com/edgi-govdata-archiving/web-monitoring-processing) ([@danielballan](https://github.com/danielballan))
  A Python backend that pulls data from a source like the Internet Archive and computes diffs.
* [**web-monitoring-versionista-scraper**](https://github.com/edgi-govdata-archiving/web-monitoring-versionista-scraper) ([@Mr0grog](https://github.com/Mr0grog))
  A set of Node.js scripts used to extract data from Versionista and load it into the database. It also generates the CSV files that analysts currently use in Google Spreadsheets to review changes. This project runs on its own, but in the future may be managed by or merged into `web-monitoring-processing`.

For more details about the models we use in Scanner see the web-monitoring-db's [API documentation](https://api.monitoring.envirodatagov.org/).

<a id="2"></a>
## Deployment Plan

The software will be deployed on Google Cloud, with each component running in a
separate Docker container.


